(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shop/confirm-order"],{"48c2":function(t,e,o){"use strict";var n=o("ce49"),r=o.n(n);r.a},6073:function(t,e,o){"use strict";o.r(e);var n=o("aab3"),r=o.n(n);for(var a in n)"default"!==a&&function(t){o.d(e,t,function(){return n[t]})}(a);e["default"]=r.a},7237:function(t,e,o){"use strict";(function(t){o("f146"),o("921b");n(o("66fd"));var e=n(o("bca3"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("6e42")["createPage"])},aab3:function(t,e,o){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o("be59"),a=o("2f62");function i(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},n=Object.keys(o);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),n.forEach(function(e){s(t,e,o[e])})}return t}function s(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var c=function(){return o.e("third/acaui/nz-checkbox/nz-checkbox").then(o.bind(null,"12ec"))},u={components:{NzCheckbox:c},data:function(){return{bottomHeight:t.upx2px(114),dataSource:[],totalNum:0,totalPrice:0,commitType:0,address:{},title:"request-payment",loading:!1,price:1,providerList:[],payType:0,current:0,payInfo:{},mainOrderId:"",items:[{name:"支付宝",value:0},{name:"微信",value:1}]}},computed:i({},(0,a.mapGetters)({defaultAddress:"utp/address"})),onLoad:function(t){var e=this;this.dataSource=JSON.parse(decodeURIComponent(t.item)),this.commitType=t.commitType,this.dataSource.forEach(function(t,o){e.totalNum+=Number.parseInt(t.goodsTotalNum),e.totalPrice+=t.goodsTotalPrice})},methods:{radioChange:function(t){for(var e=0;e<this.items.length;e++)if(this.items[e].value===t.target.value){this.current=e;break}},payhandle:function(){var e=this;0==this.current?(n("log","支付宝"," at pages\\shop\\confirm-order.vue:158"),t.requestPayment({provider:"alipay",orderInfo:"",success:function(e){6001==e.resultCode?t.showToast({title:"支付取消",icon:"none",duration:1500}):t.showToast({title:"支付宝支付成功",icon:"success",duration:1500})},fail:function(e){t.showToast({title:"支付取消",duration:1500,icon:"none"})}})):t.requestPayment({provider:"wxpay",orderInfo:this.payInfo,success:function(o){t.navigateTo({url:"/pages/shop/pay-success?type=success&mainOrderId="+e.mainOrderId})},fail:function(o){t.showModal({content:"支付失败,原因为: "+o.errMsg,showCancel:!1}),t.navigateTo({url:"/pages/shop/pay-success?type=fail&mainOrderId="+e.mainOrderId})},complete:function(){e.loading=!1}})},submitOrder:function(){var e=this,o=[];this.dataSource.forEach(function(t,e){t.goodsInst.forEach(function(e,n){var r={goodsId:e.goodsId,goodsNum:e.goodsNum,storeId:t.storeId,goodsInstAttrs:[{attrId:1,attrValueId:2}]};o.push(r)})});var a=t.getStorageSync("userInfo"),i={shopCarNbr:a.shopCarNbr,goodsInsts:o,commitType:this.commitType,addressId:this.defaultAddress.addressId};n("log",JSON.stringify(i)," at pages\\shop\\confirm-order.vue:240"),t.showLoading({title:"正在提交...",mask:!0}),(0,r.postCommitOrder)(i).then(function(o){t.hideLoading(),200==o.code?(e.current=1,e.payInfo=o.data.payInfo,n("log",e.payInfo," at pages\\shop\\confirm-order.vue:250"),e.mainOrderId=o.data.mainOrderId,e.payhandle(),t.$emit("updateCart",{msg:"页面更新"})):t.showToast({title:o.msg,icon:"none"})})}}};e.default=u}).call(this,o("6e42")["default"],o("0de9")["default"])},bca3:function(t,e,o){"use strict";o.r(e);var n=o("d564"),r=o("6073");for(var a in r)"default"!==a&&function(t){o.d(e,t,function(){return r[t]})}(a);o("48c2");var i,s=o("f0c5"),c=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,"56e60bda",null,!1,n["a"],i);e["default"]=c.exports},ce49:function(t,e,o){},d564:function(t,e,o){"use strict";var n,r=function(){var t=this,e=t.$createElement;t._self._c},a=[];o.d(e,"b",function(){return r}),o.d(e,"c",function(){return a}),o.d(e,"a",function(){return n})}},[["7237","common/runtime","common/vendor"]]]);