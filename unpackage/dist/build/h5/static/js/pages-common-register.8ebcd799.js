(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-common-register"],{"063d":function(e,t,r){"use strict";var n=r("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.market_http=t.bht_http=void 0;var a=n(r("cebc")),i=n(r("5cd0")),o=n(r("1728")),u=new i.default;t.bht_http=u,u.setConfig(function(e){return e.baseUrl=o.default.BASE_BHT_URL,e}),u.validateStatus=function(e){return 200===e.statusCode},u.interceptor.request(function(e,t){return e.header=(0,a.default)({},e.header,{dataType:"json"}),e}),u.interceptor.response(function(e){return e.data},function(e){return uni.showToast({icon:"none",title:"您的网络不给力，请稍后重试！"}),e});var s=new i.default;t.market_http=s,s.setConfig(function(e){return e.baseUrl=o.default.BASE_MARKET_URL,e}),s.validateStatus=function(e){return 200===e.statusCode},s.interceptor.request(function(e,t){return e.header=(0,a.default)({},e.header,{dataType:"json"}),e}),s.interceptor.response(function(e){return e.data},function(e){return uni.showToast({icon:"none",title:"您的网络不给力，请稍后重试！"}),e})},1728:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={BASE_BHT_URL:"https://bht.bt.yndth.cn/api/",BASE_MARKET_URL:"http://market.bt.yndth.cn/api/v1.22/",BASE_TRADEING_URL:"http://www.trade",BASE_SHOPPING_URL:"http://182.92.165.86/mobile"};t.default=n},"39d9":function(e,t,r){"use strict";r.r(t);var n=r("7bea"),a=r.n(n);for(var i in n)"default"!==i&&function(e){r.d(t,e,function(){return n[e]})}(i);t["default"]=a.a},"5cd0":function(e,t,r){"use strict";var n=r("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("a4bb"));r("ac6a"),r("7f7f");var i=n(r("f499")),o=n(r("cebc")),u=n(r("795b"));r("96cf");var s=n(r("3b8d")),c=n(r("d225")),l=n(r("b0b4")),d=n(r("bd86")),f=function(){function e(){var t=this;(0,c.default)(this,e),(0,d.default)(this,"config",{baseUrl:"",header:{"content-type":"application/json;charset=UTF-8"},method:"GET",dataType:"json",responseType:"text"}),(0,d.default)(this,"interceptor",{request:function(e){e&&(t.requestBeforeFun=e)},response:function(e,r){e&&r&&(t.requestComFun=e,t.requestComFail=r)}})}return(0,l.default)(e,[{key:"requestBeforeFun",value:function(e){return e}},{key:"requestComFun",value:function(e){return e}},{key:"requestComFail",value:function(e){return e}},{key:"validateStatus",value:function(e){return 200===e.statusCode}},{key:"setConfig",value:function(e){this.config=e(this.config)}},{key:"request",value:function(){var t=(0,s.default)(regeneratorRuntime.mark(function t(){var r,n=this,a=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},r.baseUrl=this.config.baseUrl,r.dataType=r.dataType||this.config.dataType,r.responseType=r.responseType||this.config.responseType,r.url=r.url||"",r.data=r.data||{},r.params=r.params||{},r.header=r.header||this.config.header,r.method=r.method||this.config.method,t.abrupt("return",new u.default(function(t,a){var u=!0,s={};r.complete=function(e){e.config=s,n.validateStatus(e)?(e=n.requestComFun(e),t(e)):(e=n.requestComFail(e),a(e))};var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"handle cancel",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,n={errMsg:e,config:t};a(n),u=!1};s=(0,o.default)({},n.requestBeforeFun(r,c));var l=(0,o.default)({},s);if(u){var d=e.posUrl(r.url)?r.url:r.baseUrl+r.url;if("{}"!==(0,i.default)(r.params)){var f=e.addQueryString(r.params);d+=-1===d.indexOf("?")?"?".concat(f):"&".concat(f)}l.url=d,uni.request(l)}}));case 10:case"end":return t.stop()}},t,this)}));function r(){return t.apply(this,arguments)}return r}()},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request((0,o.default)({url:e,method:"GET"},t))}},{key:"post",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request((0,o.default)({url:e,data:t,method:"POST"},r))}},{key:"put",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request((0,o.default)({url:e,data:t,method:"PUT"},r))}},{key:"delete",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request((0,o.default)({url:e,data:t,method:"DELETE"},r))}},{key:"connect",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request((0,o.default)({url:e,data:t,method:"CONNECT"},r))}},{key:"head",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request((0,o.default)({url:e,data:t,method:"HEAD"},r))}},{key:"options",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request((0,o.default)({url:e,data:t,method:"OPTIONS"},r))}},{key:"trace",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request((0,o.default)({url:e,data:t,method:"TRACE"},r))}},{key:"upload",value:function(t,r){var n=this,a=r.filePath,i=r.name,s=r.header,c=r.formData;return new u.default(function(r,u){var l=!0,d={},f={baseUrl:n.config.baseUrl,url:t,filePath:a,method:"UPLOAD",name:i,header:s||n.config.header,formData:c,complete:function(e){e.config=d,200===e.statusCode?(e=n.requestComFun(e),r(e)):(e=n.requestComFail(e),u(e))}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"handle cancel",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f,r={errMsg:e,config:t};u(r),l=!1};d=(0,o.default)({},n.requestBeforeFun(f,h));var p=(0,o.default)({},d);l&&(p.url=e.posUrl(t)?t:n.config.baseUrl+t,uni.uploadFile(p))})}}],[{key:"posUrl",value:function(e){return/(http|https):\/\/([\w.]+\/?)\S*/.test(e)}},{key:"addQueryString",value:function(e){var t="";return(0,a.default)(e).forEach(function(r){t+=r+"="+e[r]+"&"}),t.substring(0,t.length-1)}}]),e}();t.default=f},"62b4":function(e,t,r){var n=r("7917");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=r("4f06").default;a("28378946",n,!0,{sourceMap:!1,shadowMode:!1})},"6ecf":function(e,t,r){"use strict";var n=r("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.forgetPassword=t.updateUserInfo=t.register=t.sendMobileCode=t.login=void 0;var a=n(r("795b")),i=r("063d"),o=function(e){return i.bht_http.get("user/login",{params:e})};t.login=o;var u=function(e){return i.bht_http.get("verify/send/".concat(e))};t.sendMobileCode=u;var s=function(e){return i.bht_http.post("user/reg",e,{header:{"Content-Type":"application/x-www-form-urlencoded"}})};t.register=s;var c=function(e){return uni.showLoading({title:"正在努力提交...",mask:!0}),new a.default(function(t,r){i.bht_http.post("user/update",e,{header:{"content-Type":"application/x-www-form-urlencoded"}}).then(function(e){uni.hideLoading(),t(e)}).catch(function(e){uni.hideLoading(),r(e)})})};t.updateUserInfo=c;var l=function(e){return uni.showLoading({title:"正在努力提交...",mask:!0}),new a.default(function(t,r){i.bht_http.post("user/resetPassword",e,{header:{"content-type":"application/x-www-form-urlencoded"}}).then(function(e){uni.hideLoading(),t(e)}).catch(function(e){uni.hideLoading(),r(e)})})};t.forgetPassword=l},7126:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",{staticClass:"app-content"},[r("aca-nav-bar",{attrs:{level:2,title:"注册"}}),r("bht-layout-container",{attrs:{"bg-color":"#fff"}},[r("v-uni-view",{staticClass:"app-register"},[r("v-uni-picker",{attrs:{value:e.paperTypeIndex,range:e.roleArr},on:{change:function(t){t=e.$handleEvent(t),e.pickerPaperTypeChange(t)}}},[r("v-uni-view",{staticClass:"aca-form-input"},[r("v-uni-view",{staticClass:"aca-input-icon"},[r("v-uni-view",{staticClass:"iconfont aca-user"})],1),r("v-uni-input",{staticClass:"aca-input",attrs:{disabled:"true",value:e.roleText,placeholder:"请选择角色"}}),r("v-uni-view",{staticClass:"arrow-right"},[r("v-uni-view",{staticClass:"iconfont aca-xiala"})],1)],1)],1),r("v-uni-view",{staticClass:"aca-form-input"},[r("v-uni-view",{staticClass:"aca-input-icon"},[r("v-uni-view",{staticClass:"iconfont aca-shouji"})],1),r("v-uni-input",{staticClass:"aca-input",attrs:{type:"number",placeholder:"请输入手机号"},model:{value:e.regData.mobile,callback:function(t){e.$set(e.regData,"mobile",t)},expression:"regData.mobile"}})],1),r("v-uni-view",{staticClass:"aca-form-input"},[r("v-uni-view",{staticClass:"aca-input-icon"},[r("v-uni-view",{staticClass:"iconfont aca-securityCode-b"})],1),r("v-uni-input",{staticClass:"aca-input",attrs:{type:"number",maxlength:"6",placeholder:"请输入验证码"},model:{value:e.regData.code,callback:function(t){e.$set(e.regData,"code",t)},expression:"regData.code"}}),r("v-uni-text",{staticClass:"se-code",on:{click:function(t){t=e.$handleEvent(t),e.getCode(t)}}},[e._v(e._s(e.vcodeBtnName))])],1),r("v-uni-view",{staticClass:"aca-form-input"},[r("v-uni-view",{staticClass:"aca-input-icon"},[r("v-uni-view",{staticClass:"iconfont aca-mima"})],1),r("v-uni-input",{staticClass:"aca-input",attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.regData.password,callback:function(t){e.$set(e.regData,"password",t)},expression:"regData.password"}})],1),r("v-uni-button",{staticClass:"app-btn",attrs:{"hover-class":""},on:{click:function(t){t=e.$handleEvent(t),e.handleReg(t)}}},[e._v("注册")])],1)],1)],1)},a=[];r.d(t,"a",function(){return n}),r.d(t,"b",function(){return a})},"73fb":function(e,t,r){"use strict";r.r(t);var n=r("7126"),a=r("39d9");for(var i in a)"default"!==i&&function(e){r.d(t,e,function(){return a[e]})}(i);r("b27c");var o=r("2877"),u=Object(o["a"])(a["default"],n["a"],n["b"],!1,null,"71402df1",null);t["default"]=u.exports},7917:function(e,t,r){t=e.exports=r("2350")(!1),t.push([e.i,".app-register[data-v-71402df1]{padding:%?60?% %?60?% 0}.app-register .se-code[data-v-71402df1]{margin:0 %?24?%;font-size:%?30?%;color:#e40011}.app-register .arrow-right[data-v-71402df1]{width:%?80?%;text-align:center;color:#a9a8a8}",""])},"7bea":function(e,t,r){"use strict";var n=r("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("a481");var a=n(r("cebc")),i=r("2f62"),o=n(r("b827")),u=r("6ecf"),s={data:function(){return{regData:{type:"",mobile:"",password:"",code:""},roleText:"",paperTypeIndex:0,vcodeBtnName:"获取验证码",rule:[{name:"type",checkType:"notnull",errorMsg:"请选择角色"},{name:"mobile",checkType:"phoneno",errorMsg:"请填写正确的手机号"},{name:"code",checkType:"string",checkRule:"6",errorMsg:"请正确填写短信验证码"},{name:"password",checkType:"number",checkRule:"notnull",errorMsg:"请填写密码"}]}},computed:(0,a.default)({},(0,i.mapGetters)("utp",["roleArr","roleData"])),methods:{handleReg:function(){var e=this,t=o.default.check((0,a.default)({},this.regData),this.rule);t?this.validateCode()&&(0,u.register)(this.regData).then(function(t){var r=t.data,n=r.code,a=r.msg;200===n&&(uni.showToast({title:"注册成功"}),setTimeout(function(){uni.removeStorageSync("mobileCode"),e.$Router.replace({name:"login"})},2e3)),500===n&&uni.showToast({title:a,icon:"none"})}).catch(function(e){}):uni.showToast({title:o.default.error,icon:"none"})},pickerPaperTypeChange:function(e){var t=e.target,r=this.roleData[t.value];this.regData.type=r.code,this.roleText=r.value},getCode:function(){var e=this,t=/^[1][1,2,3,4,5,7,8,9][0-9]{9}$/;if(!t.test(this.regData.mobile))return uni.showToast({title:"请正确填写手机号码",icon:"none"}),!1;"获取验证码"!=this.vcodeBtnName&&"重新发送"!=this.vcodeBtnName||(this.vcodeBtnName="发送中...",(0,u.sendMobileCode)(this.regData.mobile).then(function(t){uni.setStorageSync("mobileCode",t),e.countNum=120,e.countDownTimer=setInterval(function(){this.countDown()}.bind(e),1e3)}).catch(function(t){e.vcodeBtnName="重新发送",uni.showToast({icon:"none",title:"验证码发送失败！"})}))},countDown:function(){if(this.countNum<1)return clearInterval(this.countDownTimer),void(this.vcodeBtnName="重新发送");this.countNum--,this.vcodeBtnName=this.countNum+"秒重发"},validateCode:function(){var e=uni.getStorageSync("mobileCode");if(void 0!==e&&""!==e){var t=this.regData,r=t.mobile,n=t.code;return e.mobile!==r?(uni.showToast({title:"请发送验证码",icon:"none"}),!1):e.code===n||(uni.showToast({title:"短信验证码不正确",icon:"none"}),!1)}return uni.showToast({title:"请发送验证码",icon:"none"}),!1}}};t.default=s},b27c:function(e,t,r){"use strict";var n=r("62b4"),a=r.n(n);a.a},b827:function(e,t,r){"use strict";r("c5f6"),r("28a5"),r("3b2b"),r("7f7f"),e.exports={error:"",check:function(e,t){for(var r=0;r<t.length;r++){if(!t[r].checkType)return!0;if(!t[r].name)return!0;if(!t[r].errorMsg)return!0;if(!e[t[r].name])return this.error=t[r].errorMsg,!1;switch(t[r].checkType){case"string":var n=new RegExp("^.{"+t[r].checkRule+"}$");if(!n.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"int":n=new RegExp("^(-[1-9]|[1-9])[0-9]{"+t[r].checkRule+"}$");if(!n.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"between":if(!this.isNumber(e[t[r].name]))return this.error=t[r].errorMsg,!1;var a=t[r].checkRule.split(",");if(a[0]=Number(a[0]),a[1]=Number(a[1]),e[t[r].name]>a[1]||e[t[r].name]<a[0])return this.error=t[r].errorMsg,!1;break;case"betweenD":n=/^-?[1-9][0-9]?$/;if(!n.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;a=t[r].checkRule.split(",");if(a[0]=Number(a[0]),a[1]=Number(a[1]),e[t[r].name]>a[1]||e[t[r].name]<a[0])return this.error=t[r].errorMsg,!1;break;case"betweenF":n=/^-?[0-9][0-9]?.+[0-9]+$/;if(!n.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;a=t[r].checkRule.split(",");if(a[0]=Number(a[0]),a[1]=Number(a[1]),e[t[r].name]>a[1]||e[t[r].name]<a[0])return this.error=t[r].errorMsg,!1;break;case"same":if(e[t[r].name]!=t[r].checkRule)return this.error=t[r].errorMsg,!1;break;case"notsame":if(e[t[r].name]==t[r].checkRule)return this.error=t[r].errorMsg,!1;break;case"email":n=/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;if(!n.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"phoneno":n=/^1[0-9]{10,10}$/;if(!n.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"zipcode":n=/^[0-9]{6}$/;if(!n.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"reg":n=new RegExp(t[r].checkRule);if(!n.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"in":if(-1==t[r].checkRule.indexOf(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"notnull":if(null==e[t[r].name]||e[t[r].name].length<1)return this.error=t[r].errorMsg,!1;break}}return!0},isNumber:function(e){return e=Number(e),NaN!=e}}}}]);